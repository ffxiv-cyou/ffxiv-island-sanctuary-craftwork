import"./modulepreload-polyfill-ec808ebb.js";(function(){let s=/[\?&]OVERLAY_WS=([^&]+)/.exec(location.href),i=null,l=[],p=0,c={},r={},o=null,f=!1;if(s){let t=function(){i=new WebSocket(s[1]),i.addEventListener("error",e=>{console.error(e)}),i.addEventListener("open",()=>{console.log("Connected!");let e=l;l=null;for(let n of e)o(n)}),i.addEventListener("message",e=>{try{e=JSON.parse(e.data)}catch{console.error("Invalid message received: ",e);return}e.rseq!==void 0&&c[e.rseq]?(c[e.rseq](e),delete c[e.rseq]):u(e)}),i.addEventListener("close",()=>{l=[],console.log("Trying to reconnect..."),setTimeout(()=>{t()},300)})};o=e=>{l?l.push(e):i.send(JSON.stringify(e))},t()}else{let t=function(){if(!window.OverlayPluginApi||!window.OverlayPluginApi.ready){setTimeout(t,300);return}let e=l;l=null,window.__OverlayCallback=u;for(let[n,a]of e)o(n,a)};o=(e,n)=>{l?l.push([e,n]):OverlayPluginApi.callHandler(JSON.stringify(e),n)},t()}function u(t){if(r[t.type])for(let e of r[t.type])e(t)}window.dispatchOverlayEvent=u,window.addOverlayListener=(t,e)=>{f&&r[t]&&console.warn(`A new listener for ${t} has been registered after event transmission has already begun.
Some events might have been missed and no cached values will be transmitted.
Please register your listeners before calling startOverlayEvents().`),r[t]||(r[t]=[]),r[t].push(e)},window.removeOverlayListener=(t,e)=>{if(r[t]){let n=r[t],a=n.indexOf(e);a>-1&&n.splice(a,1)}},window.callOverlayHandler=t=>{let e;return i?(t.rseq=p++,e=new Promise(n=>{c[t.rseq]=n}),o(t)):e=new Promise(n=>{o(t,a=>{n(a==null?null:JSON.parse(a))})}),e},window.startOverlayEvents=()=>{f=!1,o({call:"subscribe",events:Object.keys(r)})}})();let d=document.getElementById("token");addOverlayListener("onMJICraftworkData",s=>{console.log(`MJI Craftwork DATA: ${JSON.stringify(s)}`),O(s.data)});startOverlayEvents();let w=document.getElementById("close");w!=null&&(w.onclick=()=>{d!=null&&(d.innerText="")});let y=document.location.protocol+"//"+document.location.host;function O(s){d!=null&&(d.setAttribute("href",y+"/#/pred/"+s),d.innerText="解析")}let v=document.getElementById("link");v!=null&&v.setAttribute("href",y);

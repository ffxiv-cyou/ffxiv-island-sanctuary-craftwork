import"./modulepreload-polyfill-3cfb730f.js";(function(){let t=/[\?&]OVERLAY_WS=([^&]+)/.exec(location.href),s=null,o=[],p=0,d={},r={},i=null,f=!1;if(t){let n=function(){s=new WebSocket(t[1]),s.addEventListener("error",e=>{console.error(e)}),s.addEventListener("open",()=>{console.log("Connected!");let e=o;o=null;for(let l of e)i(l)}),s.addEventListener("message",e=>{try{e=JSON.parse(e.data)}catch{console.error("Invalid message received: ",e);return}e.rseq!==void 0&&d[e.rseq]?(d[e.rseq](e),delete d[e.rseq]):c(e)}),s.addEventListener("close",()=>{o=[],console.log("Trying to reconnect..."),setTimeout(()=>{n()},300)})};i=e=>{o?o.push(e):s.send(JSON.stringify(e))},n()}else{let n=function(){if(!window.OverlayPluginApi||!window.OverlayPluginApi.ready){setTimeout(n,300);return}let e=o;o=null,window.__OverlayCallback=c;for(let[l,a]of e)i(l,a)};i=(e,l)=>{o?o.push([e,l]):OverlayPluginApi.callHandler(JSON.stringify(e),l)},n()}function c(n){if(r[n.type])for(let e of r[n.type])e(n)}window.dispatchOverlayEvent=c,window.addOverlayListener=(n,e)=>{f&&r[n]&&console.warn(`A new listener for ${n} has been registered after event transmission has already begun.
Some events might have been missed and no cached values will be transmitted.
Please register your listeners before calling startOverlayEvents().`),r[n]||(r[n]=[]),r[n].push(e)},window.removeOverlayListener=(n,e)=>{if(r[n]){let l=r[n],a=l.indexOf(e);a>-1&&l.splice(a,1)}},window.callOverlayHandler=n=>{let e;return s?(n.rseq=p++,e=new Promise(l=>{d[n.rseq]=l}),i(n)):e=new Promise(l=>{i(n,a=>{l(a==null?null:JSON.parse(a))})}),e},window.startOverlayEvents=()=>{f=!1,i({call:"subscribe",events:Object.keys(r)})}})();const u=document.getElementById("token"),y=document.getElementById("close");y!=null&&(y.onclick=()=>(E(),!1));const w=document.location.protocol+"//"+document.location.host,v=document.getElementById("link");v!=null&&v.setAttribute("href",w);function O(t){u!=null&&(u.setAttribute("href",w+"/#/pred/"+t),u.innerText="解析")}function h(t){t==1055?m():g()}function g(){const t=document.getElementById("all");t!=null&&t.classList.add("hide")}function m(){const t=document.getElementById("all");t!=null&&t.classList.remove("hide")}function E(){const t=document.getElementById("all");t!=null&&t.classList.toggle("hide")}addOverlayListener("onMJICraftworkData",t=>{O(t.data)});addOverlayListener("onMJIZoneChanged",t=>{h(t.zoneID)});startOverlayEvents();callOverlayHandler({call:"RequestMJIZoneState"}).then(t=>{const s=document.getElementById("not-inited");s!=null&&s.classList.add("hide"),m(),h(t.zoneID)});
